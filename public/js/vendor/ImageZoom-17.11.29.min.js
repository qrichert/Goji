/*
	Copyright Â© 2017 Quentin Richert <https://www.quentinrichert.com/>
	Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License
	See http://creativecommons.org/licenses/by-nc-nd/4.0/
	Please contact the author for commercial use.
*/

function ImageZoom(d,b){function e(){a.m_containerWidth=a.m_parent.offsetWidth;a.m_containerHeight=a.m_parent.offsetHeight;a.m_containerOffsetLeft=a.m_parent.offsetLeft;a.m_containerOffsetTop=a.m_parent.offsetTop;a.m_imageWidth=a.m_containerWidth*a.m_zoom;a.m_imageHeight=a.m_containerHeight*a.m_zoom;a.m_widthDifference=Math.abs(a.m_imageWidth-a.m_containerWidth);a.m_heightDifference=Math.abs(a.m_imageHeight-a.m_containerHeight);a.m_xMin=0;a.m_xMax=-a.m_widthDifference;a.m_yMin=0;a.m_yMax=-a.m_heightDifference}
function f(){a.m_parent.style.overflow="hidden";a.m_parent.style.position="relative";a.m_parent.style.width=a.m_containerWidth+"px";a.m_parent.style.height=a.m_containerHeight+"px";a.m_image.style.position="absolute";a.m_image.style.width=a.m_containerWidth+"px";a.m_image.style.height=a.m_containerHeight+"px";a.m_image.style.top="0px";a.m_image.style.left="0px";a.m_image.style.objectFit="cover"}function g(){a.m_parent.style.overflow=null;a.m_parent.style.position=null;a.m_parent.style.width=null;
a.m_parent.style.height=null;a.m_image.style.position=null;a.m_image.style.width=null;a.m_image.style.height=null;a.m_image.style.top=null;a.m_image.style.left=null;a.m_image.style.objectFit=null}function k(b){g();e();f();a.m_parent.addEventListener(h,function(c){if("touchmove"==h){var b=c.changedTouches[0].pageX-a.m_containerOffsetLeft;c=c.changedTouches[0].pageY-a.m_containerOffsetTop}else b=c.pageX-a.m_containerOffsetLeft,c=c.pageY-a.m_containerOffsetTop;0>b||b>a.m_containerWidth||0>c||c>a.m_containerHeight||
(b/=a.m_containerWidth,a.m_image.style.top=c/a.m_containerHeight*a.m_yMax+"px",a.m_image.style.left=a.m_xMax*b+"px")},!1);a.m_parent.addEventListener(l,function(b){a.m_image.style.width=a.m_imageWidth+"px";a.m_image.style.height=a.m_imageHeight+"px"},!1);a.m_parent.addEventListener(m,function(b){a.m_image.style.width=a.m_containerWidth+"px";a.m_image.style.height=a.m_containerHeight+"px";a.m_image.style.top="0px";a.m_image.style.left="0px"},!1);window.addEventListener("resize",function(){g();e();
f()},!1)}b=void 0===b?1.7:b;var a=this,l="ontouchstart"in window?"touchstart":"mouseenter",m="ontouchend"in window?"touchend":"mouseleave",h="ontouchmove"in window?"touchmove":"mousemove";this.m_image=d;this.m_parent=d.parentNode;this.m_zoom=1>b?1:b;this.setZoom=function(a){this.m_zoom=1>a?1:a};this.getZoom=function(){return this.m_zoom};this.m_yMax=this.m_yMin=this.m_xMax=this.m_xMin=this.m_heightDifference=this.m_widthDifference=this.m_imageHeight=this.m_imageWidth=this.m_containerOffsetTop=this.m_containerOffsetLeft=
this.m_containerHeight=this.m_containerWidth=0;this.m_image.addEventListener("load",function(){k(this)},!1)};