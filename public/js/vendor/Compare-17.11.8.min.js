/*
	Copyright Â© 2017 Quentin Richert <https://www.quentinrichert.com/>
	Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License
	See http://creativecommons.org/licenses/by-nc-nd/4.0/
	Please contact the author for commercial use.
*/

function Compare(d,e,g){function f(b){a.m_separator.style.cursor="grabbing";b=(b-a.m_parent.offsetLeft)/a.m_parentWidth;1<b?b=1:0>b&&(b=0);a.m_compareLeft.style.width=100*b+"%";b=a.m_parentWidth*b-a.m_separator.offsetWidth/2;0>b?b=0:b>a.m_parentWidth-a.m_separator.offsetWidth&&(b=a.m_parentWidth-a.m_separator.offsetWidth);a.m_separator.style.left=b+"px"}e=void 0===e?50:e;g=void 0===g?!1:g;var a=this;this.m_parent=d;this.m_parent.style.position="relative";this.m_parentHeight=null;this.m_parentWidth=
this.m_parent.offsetWidth;this.setParentHeight=function(b,c){c*=a.m_parentWidth/b;c=Math.trunc(c);null!=a.m_parentHeight&&c>a.m_parentHeight||(a.m_parentHeight=c,a.m_parent.style.height=a.m_parentHeight+"px")};this.m_alwaysFollowCursor=null;this.getAlwaysFollowCursor=function(){return this.m_alwaysFollowCursor};this.setAlwaysFollowCursor=function(a){this.m_alwaysFollowCursor=a};this.setAlwaysFollowCursor(!1);this.m_compareLeft=d.getElementsByClassName("compare-left")[0];this.m_compareLeft.style.position=
"absolute";this.m_compareLeft.style.top="0";this.m_compareLeft.style.left="0";this.m_compareLeft.style.width=e+"%";this.m_compareLeft.style.height="100%";this.m_compareLeft.style.overflow="hidden";this.m_compareLeft.style.zIndex="1";this.m_imageLeft=this.m_compareLeft.getElementsByTagName("img")[0];this.m_imageLeft.style.position="absolute";this.m_imageLeft.style.top="0";this.m_imageLeft.style.left="0";this.m_imageLeft.style.width=this.m_parent.offsetWidth+"px";this.m_imageLeft.addEventListener("load",
function(){a.setParentHeight(a.m_imageLeft.naturalWidth,a.m_imageLeft.naturalHeight)},!1);this.m_compareRight=d.getElementsByClassName("compare-right")[0];this.m_compareRight.style.position="absolute";this.m_compareRight.style.top="0";this.m_compareRight.style.left="0";this.m_compareRight.style.width="100%";this.m_compareRight.style.height="100%";this.m_compareRight.style.overflow="hidden";this.m_compareRight.style.zIndex="0";this.m_imageRight=this.m_compareRight.getElementsByTagName("img")[0];this.m_imageRight.style.position=
"absolute";this.m_imageRight.style.top="0";this.m_imageRight.style.left="0";this.m_imageRight.style.width=this.m_parent.offsetWidth+"px";this.m_imageRight.addEventListener("load",function(){a.setParentHeight(a.m_imageRight.naturalWidth,a.m_imageRight.naturalHeight)},!1);this.m_separator=document.createElement("div");this.m_separator.style.width="10px";this.m_separator.style.height="100%";this.m_separator.style.position="absolute";this.m_separator.style.top="0";this.m_separator.style.left=this.m_parentWidth/
(100/e)-this.m_separator.offsetWidth/2+"px";this.m_separator.style.zIndex="3";this.m_separator.style.backgroundColor="#191919";this.m_separator.style.display="flex";this.m_separator.style.cursor="grab";this.getSeparator=function(){return this.m_separator};this.m_parent.appendChild(this.m_separator);this.m_separatorHandle=document.createElement("div");this.m_separatorHandle.style.width="4px";this.m_separatorHandle.style.height="40px";this.m_separatorHandle.style.backgroundColor="#919191";this.m_separatorHandle.style.margin=
"auto";this.m_separatorHandle.style.borderRadius="2px";this.getSeparatorHandle=function(){return this.m_separatorHandle};this.m_separator.appendChild(this.m_separatorHandle);var h=!1,k="ontouchstart"in window?"touchstart":"mousedown";d="ontouchend"in window?"touchend":"mouseup";var l="ontouchmove"in window?"touchmove":"mousemove";this.setSeparatorPosition=function(a){a+=this.m_parent.offsetLeft;f(a)};g||(document.addEventListener(l,function(b){if(h||a.m_alwaysFollowCursor)"touchmove"==l?f(b.changedTouches[0].pageX):
f(b.pageX)},!1),this.m_parent.addEventListener(k,function(a){h=!0;a.preventDefault();a.stopImmediatePropagation();"touchstart"==k?f(a.changedTouches[0].pageX):f(a.pageX)},!1),document.addEventListener(d,function(){h=!1;a.m_separator.style.cursor="grab"},!1));window.addEventListener("resize",function(){a.m_parentHeight=null;a.m_parentWidth=a.m_parent.offsetWidth;a.setParentHeight(a.m_imageLeft.naturalWidth,a.m_imageLeft.naturalHeight);a.setParentHeight(a.m_imageRight.naturalWidth,a.m_imageRight.naturalHeight);
a.m_imageLeft.style.width=a.m_parent.offsetWidth+"px";a.m_imageRight.style.width=a.m_parent.offsetWidth+"px";a.setSeparatorPosition(a.m_compareLeft.offsetWidth)},!1)};