var VideoScroll=function(a,b){var c=this;this.m_parent=a;this.m_callback=void 0===b?null:b;this.m_scroll=0;this.m_duration=null;this.m_playheadPosition=0;window.addEventListener("scroll",function(a){return c.scrollEvent(a)},!1);window.addEventListener("resize",function(a){return c.scrollEvent(a)},!1);this.scrollEvent();this.m_parent.addEventListener("loadedmetadata",function(){c.setVideoDuration()},!1);this.m_parent.addEventListener("durationchange",function(){c.setVideoDuration()},!1);this.setVideoDuration()};
VideoScroll.prototype.setVideoDuration=function(){var a=this.m_parent.duration;isNaN(a)||(this.m_duration=a)};VideoScroll.prototype.getScroll=function(){return this.m_scroll};VideoScroll.prototype.scrollEvent=function(a){var b=this.m_parent.offsetHeight;a=this.m_parent.offsetTop-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+b;b=window.innerHeight+b;this.m_scroll=a=0>a?1:a>b?0:1-a/b;this.setPlayHeadPosition();null!==this.m_callback&&this.m_callback(a)};
VideoScroll.prototype.setPlayHeadPosition=function(){null!==this.m_duration&&(this.m_playheadPosition=this.m_duration*this.m_scroll,this.m_parent.currentTime=this.m_playheadPosition)};
