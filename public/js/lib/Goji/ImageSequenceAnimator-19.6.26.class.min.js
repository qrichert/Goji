var ImageSequenceAnimator=function(a,b,d){var c=this;this.m_parent=a;this.m_imageSequence=this.m_parent.querySelector("img");this.m_nbImages=b;this.m_nbImagesPerRow=d;this.m_nbRows=Math.ceil(this.m_nbImages/this.m_nbImagesPerRow);this.m_currentImageIndex=0;this.m_ready=!1;this.m_imageSequenceHeight=this.m_imageSequenceWidth=this.m_imageSequenceNaturalHeight=this.m_imageSequenceNaturalWidth=this.m_parentHeight=this.m_parentWidth=0;this.m_imageAlreadyLoaded=!1;this.m_imageSequence.addEventListener("load",
function(){c.imageSequenceLoaded()},!1);window.addEventListener("load",function(){c.imageSequenceLoaded()},!1)};
ImageSequenceAnimator.prototype.imageSequenceLoaded=function(){if(!this.m_imageAlreadyLoaded){this.m_imageAlreadyLoaded=!0;this.m_imageSequenceNaturalWidth=null;this.m_imageSequenceNaturalWidth="width"in this.m_imageSequence.dataset&&"height"in this.m_imageSequence.dataset?parseInt(this.m_imageSequence.dataset.width,10):"aspectRatio"in this.m_imageSequence.dataset?parseFloat(this.m_imageSequence.dataset.aspectRatio):this.m_imageSequence.naturalWidth;if(null===this.m_imageSequenceNaturalWidth||isNaN(this.m_imageSequenceNaturalWidth))this.m_imageSequenceNaturalWidth=
1;this.m_imageSequenceNaturalHeight=null;this.m_imageSequenceNaturalHeight="width"in this.m_imageSequence.dataset&&"height"in this.m_imageSequence.dataset?parseInt(this.m_imageSequence.dataset.height,10):"aspectRatio"in this.m_imageSequence.dataset?1:this.m_imageSequence.naturalHeight;if(null===this.m_imageSequenceNaturalHeight||isNaN(this.m_imageSequenceNaturalHeight))this.m_imageSequenceNaturalHeight=1;this.init()}};
ImageSequenceAnimator.prototype.init=function(){this.addListeners();this.recalculateSizes();this.m_parent.style.overflow="hidden";this.m_ready=!0};ImageSequenceAnimator.prototype.addListeners=function(){var a=this;window.addEventListener("resize",function(){a.recalculateSizes()},!1)};
ImageSequenceAnimator.prototype.recalculateSizes=function(){this.m_parentWidth=this.m_parent.clientWidth;this.m_imageSequenceWidth=this.m_parentWidth*this.m_nbImagesPerRow;this.m_imageSequenceHeight=this.m_imageSequenceWidth/this.m_imageSequenceNaturalWidth*this.m_imageSequenceNaturalHeight;this.m_imageSequence.style.width=this.m_imageSequenceWidth+"px";this.m_parentHeight=this.m_imageSequenceHeight/this.m_nbRows;this.m_parent.style.height=this.m_parentHeight+"px"};
ImageSequenceAnimator.prototype.setProgress=function(a){this.m_ready&&(0>a?a=0:1<a&&(a=1),this.setCurrentIndex(this.m_nbImages*a))};ImageSequenceAnimator.prototype.setCurrentIndex=function(a){this.m_ready&&(a>this.m_nbImages&&(a=this.m_nbImages),this.m_currentImageIndex=a=Math.floor(a),a=Math.ceil(this.m_currentImageIndex/this.m_nbImagesPerRow)-1,this.setCurrentGridIndex(this.m_currentImageIndex-a*this.m_nbImagesPerRow-1,a))};
ImageSequenceAnimator.prototype.setCurrentGridIndex=function(a,b){this.m_ready&&(b>this.m_nbRows-1?b=this.m_nbRows-1:0>b&&(b=0),a>this.m_nbImagesPerRow-1?a=this.m_nbImagesPerRow-1:0>a&&(a=0),this.m_imageSequence.style.transform="translate(-"+a*this.m_parentWidth+"px, -"+b*this.m_parentHeight+"px)")};
