var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var Gallery=function(a,b,g){var d=this;this.m_parent=a;this.m_eventListeners=(void 0===b?!1:b)||{};this.m_gutter=void 0===g?4:g;this.m_elements=[];this.m_galleryReady=!1;window.addEventListener("resize",function(){d.recalculateSizes()},!1);this.applyStyling();this.updateElements();this.addListeners()};
Gallery.prototype.addListeners=function(){var a=this;window.addEventListener("load",function(){for(var b=$jscomp.makeIterator(a.m_elements),g=b.next();!g.done;g=b.next())g=g.value,"img"===g.get("node_type")&&a.recalculateImageNaturalSize(g);a.recalculateSizes()},!1)};
Gallery.prototype.applyStyling=function(){this.m_parent.style.display="flex";this.m_parent.style.flexDirection="row";this.m_parent.style.flexWrap="wrap";this.m_parent.style.justifyContent="space-between";this.m_parent.style.alignItems="flex-start";this.m_parent.style.alignContent="flex-start"};
Gallery.prototype.updateElements=function(){var a=this;this.m_elements=[];var b=this.m_parent.querySelectorAll("img, video, div.gallery_image"),g=0,d=0,e={};b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;e={$jscomp$loop$prop$newElement$10:e.$jscomp$loop$prop$newElement$10},c=b.next()){c=c.value;var h=c.tagName.toLowerCase();"img"===h&&g++;e.$jscomp$loop$prop$newElement$10=new Map;e.$jscomp$loop$prop$newElement$10.set("node",c);e.$jscomp$loop$prop$newElement$10.set("node_type",h);var f={},k;
for(k in this.m_eventListeners)f.$jscomp$loop$prop$event$8=k,this.m_eventListeners.hasOwnProperty(f.$jscomp$loop$prop$event$8)&&c.addEventListener(f.$jscomp$loop$prop$event$8,function(b){return function(c){a.m_eventListeners[b.$jscomp$loop$prop$event$8](c)}}(f)),f={$jscomp$loop$prop$event$8:f.$jscomp$loop$prop$event$8};e.$jscomp$loop$prop$newElement$10.set("width",1);e.$jscomp$loop$prop$newElement$10.set("height",1);"img"===h?(e.$jscomp$loop$prop$newElement$10.set("nat_width",c.clientWidth),e.$jscomp$loop$prop$newElement$10.set("nat_height",
c.clientHeight),c.addEventListener("load",function(b){return function(){a.recalculateImageNaturalSize(b.$jscomp$loop$prop$newElement$10);d++;d===g&&a.recalculateSizes()}}(e),!1)):(f=h=1,"width"in c.dataset&&(h=c.dataset.width),"height"in c.dataset&&(f=c.dataset.height),c.set("nat_width",h),c.set("nat_height",f));this.m_elements.push(e.$jscomp$loop$prop$newElement$10)}this.m_galleryReady=!0;this.recalculateSizes()};
Gallery.prototype.recalculateImageNaturalSize=function(a){var b=a.get("node");"img"!==a.get("node_type")||0===b.naturalWidth&&0===b.naturalHeight||(a.set("nat_width",b.naturalWidth),a.set("nat_height",b.naturalHeight))};
Gallery.prototype.recalculateSizes=function(){if(this.m_galleryReady){var a=window.getComputedStyle(this.m_parent,null);a=parseInt(a.getPropertyValue("padding-left"),10)+parseInt(a.getPropertyValue("padding-right"),10);var b=this.m_parent.clientWidth-a;a=0;600>=b?a=1:750>=b?a=2:1020>=b?a=3:1600>=b?a=4:2500>=b?a=5:2500<b&&(a=6);for(var g=$jscomp.makeIterator(this.m_elements),d=g.next();!d.done;d=g.next())d=d.value.get("node"),d.style.display="inline-block",d.style.margin="0",d.style.padding="0";g=
Math.trunc(this.m_elements.length/a)*a;d=this.m_elements.length%a;if(1<d&&d<a){for(var e=1;e<d;e++)this.m_elements[this.m_elements.length-e].get("node").style.marginLeft=this.m_gutter+"px";this.m_elements[this.m_elements.length-1].get("node").style.marginRight="auto"}b-=this.m_gutter*(a-1);for(d=0;d<this.m_elements.length;d+=a){for(var c=e=0,h=0,f=0;f<a;f++){var k=d+f;if(k>=this.m_elements.length)break;e++;k=this.m_elements[k];0===f&&(h=k.get("nat_height"));k.set("width",k.get("nat_width")*(h/k.get("nat_height")));
k.set("height",h);c+=k.get("width")}e=e/a*b/c;for(c=0;c<a;c++){h=d+c;if(h>=this.m_elements.length)break;f=this.m_elements[h].get("node");f.style.width=this.m_elements[h].get("width")*e+"px";f.style.height=this.m_elements[h].get("height")*e+"px";f.style.marginBottom=(h<g?this.m_gutter:0)+"px"}}}};
