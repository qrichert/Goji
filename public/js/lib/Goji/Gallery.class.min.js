var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var Gallery=function(a,b,d){var c=this;d=void 0===d?null:d;this.m_parent=a;this.m_eventListeners=(void 0===b?!1:b)||{};this.m_gutter=null!==d?d:4;this.m_elements=[];this.m_galleryReady=!1;window.addEventListener("resize",function(){c.recalculateSizes()},!1);this.applyStyling();this.updateElements();this.addListeners()};
Gallery.prototype.addListeners=function(){var a=this;window.addEventListener("load",function(){for(var b=$jscomp.makeIterator(a.m_elements),d=b.next();!d.done;d=b.next())d=d.value,"img"===d.get("node_type")&&a.recalculateImageNaturalSize(d);a.recalculateSizes()},!1)};
Gallery.prototype.applyStyling=function(){this.m_parent.style.display="flex";this.m_parent.style.flexDirection="row";this.m_parent.style.flexWrap="wrap";this.m_parent.style.justifyContent="space-between";this.m_parent.style.alignItems="flex-start";this.m_parent.style.alignContent="flex-start"};
Gallery.prototype.updateElements=function(){var a=this;this.m_elements=[];var b=this.m_parent.querySelectorAll("img, video, div.gallery_image"),d=0,c=0,f={};b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;f={$jscomp$loop$prop$newElement$11:f.$jscomp$loop$prop$newElement$11},e=b.next()){e=e.value;var h=e.tagName.toLowerCase();"img"===h&&d++;f.$jscomp$loop$prop$newElement$11=new Map;f.$jscomp$loop$prop$newElement$11.set("node",e);f.$jscomp$loop$prop$newElement$11.set("node_type",h);var g={},k;
for(k in this.m_eventListeners)g.$jscomp$loop$prop$event$9=k,this.m_eventListeners.hasOwnProperty(g.$jscomp$loop$prop$event$9)&&e.addEventListener(g.$jscomp$loop$prop$event$9,function(b){return function(c){a.m_eventListeners[b.$jscomp$loop$prop$event$9](c)}}(g)),g={$jscomp$loop$prop$event$9:g.$jscomp$loop$prop$event$9};f.$jscomp$loop$prop$newElement$11.set("width",1);f.$jscomp$loop$prop$newElement$11.set("height",1);"img"===h?(f.$jscomp$loop$prop$newElement$11.set("nat_width",e.clientWidth),f.$jscomp$loop$prop$newElement$11.set("nat_height",
e.clientHeight),e.addEventListener("load",function(b){return function(){a.recalculateImageNaturalSize(b.$jscomp$loop$prop$newElement$11);c++;c===d&&a.recalculateSizes()}}(f),!1)):(g=h=1,"width"in e.dataset&&(h=e.dataset.width),"height"in e.dataset&&(g=e.dataset.height),e.set("nat_width",h),e.set("nat_height",g));this.m_elements.push(f.$jscomp$loop$prop$newElement$11)}this.m_galleryReady=!0;this.recalculateSizes()};
Gallery.prototype.recalculateImageNaturalSize=function(a){var b=a.get("node");"img"!==a.get("node_type")||0===b.naturalWidth&&0===b.naturalHeight||(a.set("nat_width",b.naturalWidth),a.set("nat_height",b.naturalHeight))};
Gallery.prototype.recalculateSizes=function(){if(this.m_galleryReady){var a=window.getComputedStyle(this.m_parent,null);a=parseInt(a.getPropertyValue("padding-left"),10)+parseInt(a.getPropertyValue("padding-right"),10);var b=this.m_parent.clientWidth-a;a=0;600>=b?a=1:750>=b?a=2:1020>=b?a=3:1600>=b?a=4:2500>=b?a=5:2500<b&&(a=6);for(var d=$jscomp.makeIterator(this.m_elements),c=d.next();!c.done;c=d.next())c=c.value.get("node"),c.style.display="inline-block",c.style.margin="0",c.style.padding="0";d=
Math.trunc(this.m_elements.length/a)*a;c=this.m_elements.length%a;if(1<c&&c<a){for(var f=1;f<c;f++)this.m_elements[this.m_elements.length-f].get("node").style.marginLeft=this.m_gutter+"px";this.m_elements[this.m_elements.length-1].get("node").style.marginRight="auto"}b-=this.m_gutter*(a-1);for(c=0;c<this.m_elements.length;c+=a){for(var e=f=0,h=0,g=0;g<a;g++){var k=c+g;if(k>=this.m_elements.length)break;f++;k=this.m_elements[k];0===g&&(h=k.get("nat_height"));k.set("width",k.get("nat_width")*(h/k.get("nat_height")));
k.set("height",h);e+=k.get("width")}f=f/a*b/e;for(e=0;e<a;e++){h=c+e;if(h>=this.m_elements.length)break;g=this.m_elements[h].get("node");g.style.width=Math.floor(this.m_elements[h].get("width")*f)+"px";g.style.height=Math.floor(this.m_elements[h].get("height")*f)+"px";g.style.marginBottom=(h<d?this.m_gutter:0)+"px"}}}};Gallery.prototype.getIndexForImage=function(a){for(var b=0,d=$jscomp.makeIterator(this.m_elements),c=d.next();!c.done;c=d.next()){if(c.value.get("node")===a)return b;b++}return null};
Gallery.prototype.getImageForIndex=function(a){if("undefined"===typeof this.m_elements[a])return null;a=this.m_elements[a].get("node");return"undefined"===typeof a?null:a};Gallery.prototype.getIndexIsFirstIndex=function(a){return 0>=a};Gallery.prototype.getIndexIsLastIndex=function(a){return a>=this.m_elements.length-1};
